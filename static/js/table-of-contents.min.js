$(document).ready(function(){var a,b=$("#TableOfContents"),d=(b.outerHeight()+15,$("#site-header").height()),e=b.find("a"),f=e.map(function(){var a=$($(this).attr("href"));if(a.length)return a});$(window).scroll(function(b){b.preventDefault();var c=$(window).scrollTop()+$(window).height()==$(document).height(),g=$(this).scrollTop()+d+100,h=f.map(function(){if($(this).offset().top<g)return this});h=h[h.length-1];var i=h&&h.length?h[0].id:"";a!==i&&(a=i,e.parent().removeClass("active").end().filter("[href='#"+i+"']").parent().addClass("active"),history.replaceState({},"",e.filter("[href='#"+i+"']").attr("href"))),c&&(e.parent().removeClass("active"),"active"!==e.last().parent().attr("class")&&e.last().parent().addClass("active"))})});